{% extends "dashboard/base.html" %}
{% load static %}

{% block dashboard_title %}Assistente ARN Analytics{% endblock %}

{% block dashboard_content %}
<!-- Header do Assistente -->
<div class="platform-card mb-4">
    <div class="card-header">
        <h2 class="card-title mb-0">
            <i class="fas fa-robot me-2"></i>
            Assistente ARN Analytics
        </h2>
        <p class="card-subtitle">IA integrada aos dados de telecomunica√ß√µes da Guin√©-Bissau</p>
    </div>
</div>

<!-- Interface do Chat -->
<div class="arn-chat-container">
    <!-- Chat Messages Area -->
    <div class="arn-chat-messages" id="chatMessages">
        <!-- Welcome Message -->
        <div class="arn-message bot-message">
            <div class="message-avatar">
                <i class="fas fa-robot"></i>
            </div>
            <div class="message-content">
                <div class="message-text">
                    <p>üëã Ol√°! Sou o <strong>Assistente ARN Analytics</strong>, sua IA especializada em dados de telecomunica√ß√µes.</p>
                    <p>Posso ajudar voc√™ com:</p>
                    <ul>
                        <li>üìä An√°lises de market share e assinantes</li>
                        <li>üìû Dados de tr√°fego de voz</li>
                        <li>üí∞ Receitas e faturamento</li>
                        <li>üìà Compara√ß√µes entre operadoras</li>
                        <li>üìâ Tend√™ncias e evolu√ß√£o do mercado</li>
                    </ul>
                    <p>Que dados gostaria de consultar?</p>
                </div>
                <div class="message-suggestions" id="initialSuggestions">
                    <button class="suggestion-btn" data-suggestion="Qual a quota de mercado da Orange?">
                        Quota de mercado da Orange
                    </button>
                    <button class="suggestion-btn" data-suggestion="Mostre os dados de assinantes de 2023">
                        Assinantes 2023
                    </button>
                    <button class="suggestion-btn" data-suggestion="Compare TELECEL e Orange em receitas">
                        Comparar receitas
                    </button>
                    <button class="suggestion-btn" data-suggestion="Como evoluiu o tr√°fego nos √∫ltimos anos?">
                        Evolu√ß√£o do tr√°fego
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Chat Input Area -->
    <div class="arn-chat-input">
        <div class="chat-input-container">
            <input type="text" 
                   id="chatInput" 
                   class="chat-input-field" 
                   placeholder="Digite sua pergunta sobre dados de telecomunica√ß√µes..."
                   maxlength="500">
            <button id="sendMessage" class="chat-send-btn">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
        
        <!-- Quick Actions -->
        <div class="chat-quick-actions">
            <button class="quick-action-btn" data-action="clear" title="Limpar conversa">
                <i class="fas fa-trash"></i>
            </button>
            <button class="quick-action-btn" data-action="history" title="Ver hist√≥rico">
                <i class="fas fa-history"></i>
            </button>
            <button class="quick-action-btn" data-action="export" title="Exportar conversa">
                <i class="fas fa-download"></i>
            </button>
        </div>
    </div>
    
    <!-- Loading Indicator -->
    <div class="arn-loading" id="chatLoading" style="display: none;">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <span>Analisando dados...</span>
        </div>
    </div>
</div>

<!-- Sidebar com informa√ß√µes -->
<div class="arn-chat-sidebar">
    <div class="platform-card">
        <div class="card-header">
            <h4 class="card-title">
                <i class="fas fa-info-circle me-2"></i>
                Status do Sistema
            </h4>
        </div>
        <div class="card-body">
            <div class="status-item">
                <span class="status-indicator online"></span>
                <span>Assistente Online</span>
            </div>
            <div class="status-item">
                <span class="status-indicator online"></span>
                <span>Base de Dados Conectada</span>
            </div>
            <div class="status-item">
                <span class="status-indicator" id="aiStatus">pending</span>
                <span>IA Avan√ßada (HuggingFace)</span>
            </div>
            <div class="status-item">
                <span class="status-indicator" id="deepseekStatus">pending</span>
                <span>DeepSeek Reasoning</span>
            </div>
        </div>
    </div>
    
    <div class="platform-card mt-3">
        <div class="card-header">
            <h4 class="card-title">
                <i class="fas fa-chart-bar me-2"></i>
                Dados Dispon√≠veis
            </h4>
        </div>
        <div class="card-body">
            <div class="data-stats">
                <div class="data-stat-item">
                    <i class="fas fa-users"></i>
                    <span>Assinantes por operadora</span>
                </div>
                <div class="data-stat-item">
                    <i class="fas fa-phone"></i>
                    <span>Tr√°fego de voz</span>
                </div>
                <div class="data-stat-item">
                    <i class="fas fa-dollar-sign"></i>
                    <span>Receitas e faturamento</span>
                </div>
                <div class="data-stat-item">
                    <i class="fas fa-chart-pie"></i>
                    <span>Market share</span>
                </div>
                <div class="data-stat-item">
                    <i class="fas fa-chart-line"></i>
                    <span>Investimentos</span>
                </div>
                <div class="data-stat-item">
                    <i class="fas fa-briefcase"></i>
                    <span>Dados de emprego</span>
                </div>
            </div>
        </div>
    </div>
    
    <div class="platform-card mt-3">
        <div class="card-header">
            <h4 class="card-title">
                <i class="fas fa-lightbulb me-2"></i>
                Exemplos de Perguntas
            </h4>
        </div>
        <div class="card-body">
            <div class="example-questions">
                <div class="example-category">
                    <h6>üìä Market Share</h6>
                    <ul>
                        <li>"Qual a quota de mercado da Orange?"</li>
                        <li>"Quem √© l√≠der do mercado?"</li>
                    </ul>
                </div>
                
                <div class="example-category">
                    <h6>üìû Tr√°fego</h6>
                    <ul>
                        <li>"Volume de tr√°fego da TELECEL"</li>
                        <li>"An√°lise de tr√°fego internacional"</li>
                    </ul>
                </div>
                
                <div class="example-category">
                    <h6>‚öñÔ∏è Compara√ß√µes</h6>
                    <ul>
                        <li>"Compare TELECEL e Orange"</li>
                        <li>"Diferen√ßa de receitas entre operadoras"</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block dashboard_js %}
<script src="{% static 'dashboard/js/arn-assistant.js' %}"></script>
<script>
    // Inicializar assistente
    document.addEventListener('DOMContentLoaded', function() {
        window.ARNAssistant = new ARNAssistantInterface();
        window.ARNAssistant.initialize();
    });
</script>
{% endblock %}
