{% extends "questionarios/partials/base_form.html" %}
{% load static %}

{% block form_title %}{% if form.instance.pk %}Editar{% else %}Criar{% endif %} Indicador de Estações Móveis{% endblock %}
{% block form_subtitle %}Gestão de dados de estações móveis e banda larga por operadora{% endblock %}

{% block list_url %}{% url 'questionarios:estacoes_moveis_list' %}{% endblock %}

{% block form_fields %}
<!-- Utilizadores de Serviço -->
<div class="platform-card mb-4">
    <div class="card-header">
        <h4 class="card-title">
            <i class="fas fa-users me-2"></i>
            Utilizadores de Serviço
        </h4>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-3">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">SMS</label>
                    {{ form.sms }}
                    {% if form.sms.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.sms.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">MMS</label>
                    {{ form.mms }}
                    {% if form.mms.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.mms.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Mobile TV</label>
                    {{ form.mobile_tv }}
                    {% if form.mobile_tv.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.mobile_tv.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Roaming Internacional</label>
                    {{ form.roaming_internacional_out_parc_roaming_out }}
                    {% if form.roaming_internacional_out_parc_roaming_out.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.roaming_internacional_out_parc_roaming_out.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Banda Larga 3G -->
<div class="platform-card mb-4">
    <div class="card-header">
        <h4 class="card-title">
            <i class="fas fa-signal me-2"></i>
            Tecnologia 3G
        </h4>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-12 mb-3">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Utilizadores de serviço de 3G e upgrades</label>
                    {{ form.utilizadores_servico_3g_upgrades }}
                    {% if form.utilizadores_servico_3g_upgrades.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.utilizadores_servico_3g_upgrades.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <h6 style="color: var(--binance-yellow);">Acesso à Internet 3G</h6>
        <div class="row">
            <div class="col-md-4">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Utilizadores acesso Internet 3G</label>
                    {{ form.utilizadores_acesso_internet_3g }}
                    {% if form.utilizadores_acesso_internet_3g.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.utilizadores_acesso_internet_3g.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Placas (Box) 3G</label>
                    {{ form.utilizadores_3g_placas_box }}
                    {% if form.utilizadores_3g_placas_box.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.utilizadores_3g_placas_box.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Placas (USB) 3G</label>
                    {{ form.utilizadores_3g_placas_usb }}
                    {% if form.utilizadores_3g_placas_usb.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.utilizadores_3g_placas_usb.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Banda Larga 4G -->
<div class="platform-card mb-4">
    <div class="card-header">
        <h4 class="card-title">
            <i class="fas fa-broadcast-tower me-2"></i>
            Tecnologia 4G
        </h4>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-12 mb-3">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Utilizadores de serviço 4G</label>
                    {{ form.utilizadores_servico_4g }}
                    {% if form.utilizadores_servico_4g.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.utilizadores_servico_4g.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <h6 style="color: var(--binance-yellow);">Acesso à Internet 4G</h6>
        <div class="row">
            <div class="col-md-4">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Utilizadores acesso Internet 4G</label>
                    {{ form.utilizadores_acesso_internet_4g }}
                    {% if form.utilizadores_acesso_internet_4g.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.utilizadores_acesso_internet_4g.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Placas (Box) 4G</label>
                    {{ form.utilizadores_4g_placas_box }}
                    {% if form.utilizadores_4g_placas_box.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.utilizadores_4g_placas_box.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Placas (USB) 4G</label>
                    {{ form.utilizadores_4g_placas_usb }}
                    {% if form.utilizadores_4g_placas_usb.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.utilizadores_4g_placas_usb.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Estações Móveis Ativas -->
<div class="platform-card mb-4">
    <div class="card-header">
        <h4 class="card-title">
            <i class="fas fa-mobile-alt me-2"></i>
            Estações Móveis Ativas
        </h4>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Afectos a planos Pós-pagos</label>
                    {{ form.afectos_planos_pos_pagos }}
                    {% if form.afectos_planos_pos_pagos.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.afectos_planos_pos_pagos.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Utilização Pós-pagos</label>
                    {{ form.afectos_planos_pos_pagos_utilizacao }}
                    {% if form.afectos_planos_pos_pagos_utilizacao.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.afectos_planos_pos_pagos_utilizacao.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-6">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Afectos a planos Pré-pagos</label>
                    {{ form.afectos_planos_pre_pagos }}
                    {% if form.afectos_planos_pre_pagos.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.afectos_planos_pre_pagos.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Utilização Pré-pagos</label>
                    {{ form.afectos_planos_pre_pagos_utilizacao }}
                    {% if form.afectos_planos_pre_pagos_utilizacao.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.afectos_planos_pre_pagos_utilizacao.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-6">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Situações Específicas</label>
                    {{ form.associados_situacoes_especificas }}
                    {% if form.associados_situacoes_especificas.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.associados_situacoes_especificas.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Outros (Residuais)</label>
                    {{ form.outros_residuais }}
                    {% if form.outros_residuais.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.outros_residuais.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Mobile Money -->
<div class="platform-card mb-4">
    <div class="card-header">
        <h4 class="card-title">
            <i class="fas fa-money-bill-wave me-2"></i>
            Serviços de Mobile Money
        </h4>
    </div>
    <div class="card-body">
        <h6 style="color: var(--binance-yellow);">Número de Utilizadores</h6>
        <div class="row mb-4">
            <div class="col-md-4">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Total Utilizadores</label>
                    {{ form.numero_utilizadores }}
                    {% if form.numero_utilizadores.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.numero_utilizadores.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Utilizadores (Mulher)</label>
                    {{ form.numero_utilizadores_mulher }}
                    {% if form.numero_utilizadores_mulher.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.numero_utilizadores_mulher.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Utilizadores (Homem)</label>
                    {{ form.numero_utilizadores_homem }}
                    {% if form.numero_utilizadores_homem.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.numero_utilizadores_homem.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <h6 style="color: var(--binance-success);">Carregamentos</h6>
        <div class="row mb-4">
            <div class="col-md-4">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Total Carregamentos</label>
                    {{ form.total_carregamentos }}
                    {% if form.total_carregamentos.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.total_carregamentos.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Carregamentos (Mulher)</label>
                    {{ form.total_carregamentos_mulher }}
                    {% if form.total_carregamentos_mulher.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.total_carregamentos_mulher.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Carregamentos (Homem)</label>
                    {{ form.total_carregamentos_homem }}
                    {% if form.total_carregamentos_homem.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.total_carregamentos_homem.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <h6 style="color: var(--binance-info);">Levantamentos</h6>
        <div class="row mb-4">
            <div class="col-md-4">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Total Levantamentos</label>
                    {{ form.total_levantamentos }}
                    {% if form.total_levantamentos.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.total_levantamentos.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Levantamentos (Mulher)</label>
                    {{ form.total_levantamentos_mulher }}
                    {% if form.total_levantamentos_mulher.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.total_levantamentos_mulher.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Levantamentos (Homem)</label>
                    {{ form.total_levantamentos_homem }}
                    {% if form.total_levantamentos_homem.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.total_levantamentos_homem.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <h6 style="color: var(--binance-warning);">Transferências</h6>
        <div class="row">
            <div class="col-md-4">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Total Transferências</label>
                    {{ form.total_transferencias }}
                    {% if form.total_transferencias.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.total_transferencias.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Transferências (Mulher)</label>
                    {{ form.total_transferencias_mulher }}
                    {% if form.total_transferencias_mulher.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.total_transferencias_mulher.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group-questionario">
                    <label class="form-label-questionario">Transferências (Homem)</label>
                    {{ form.total_transferencias_homem }}
                    {% if form.total_transferencias_homem.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.total_transferencias_homem.errors %}{{ error }}{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block submit_text %}{% if form.instance.pk %}Atualizar{% else %}Criar{% endif %} Indicador{% endblock %}

{% block form_info %}
<div class="platform-card mt-4">
    <div class="card-header">
        <h3 class="card-title">
            <i class="fas fa-info-circle me-2"></i>
            Informações Importantes
        </h3>
    </div>
    <div class="card-body">
        <div class="alert-questionario alert-questionario-info">
            <i class="fas fa-lightbulb"></i>
            <div>
                <strong>Instruções de preenchimento:</strong>
                <ul class="mb-0 mt-2">
                    <li>Preencha todos os campos com dados numéricos positivos</li>
                    <li>Use 0 (zero) para campos que não se aplicam</li>
                    <li>Dados de 3G e 4G devem refletir a realidade da infraestrutura</li>
                    <li>Mobile Money inclui todos os serviços financeiros móveis</li>
                    <li>Verifique os totais calculados automaticamente</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}